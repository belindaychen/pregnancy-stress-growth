View(H4_igf_adj_res)
library(tidyverse)
source("C:/Users/Classof2020ChenBelin/pregnancy-stress-growth/0_config.R", echo=TRUE)
source("C:/Users/Classof2020ChenBelin/pregnancy-stress-growth/src/1_create_preg_stress_growth_dataset.R", echo=TRUE)
source("C:/Users/Classof2020ChenBelin/pregnancy-stress-growth/table scripts/enrollment char.R", echo=TRUE)
source("C:/Users/Classof2020ChenBelin/pregnancy-stress-growth/table scripts/enrollment char.R", echo=TRUE)
#source(here::here("0-config.R"))
library(tidyverse)
source("C:/Users/Classof2020ChenBelin/pregnancy-stress-growth/table scripts/enrollment char.R", echo=TRUE)
source("C:/Users/Classof2020ChenBelin/pregnancy-stress-growth/0_config.R", echo=TRUE)
source("C:/Users/Classof2020ChenBelin/pregnancy-stress-growth/0_config.R", echo=TRUE)
rm(list=ls())
# source(here::here("0_config.R"))
library(cowplot)
library(patchwork)
#load spline data
H1_spline <- readRDS(here("figure-data/H1_adj_spline.data.RDS"))
H2_spline <- readRDS(here("figure-data/H2_adj_spline.data.RDS"))
H3_spline <- readRDS(here("figure-data/H3_adj_spline.data.RDS"))
H4_spline <- readRDS(here("figure-data/H4_adj_spline.data.RDS"))
#load results for quartiles
H1_quartiles <- readRDS(here("results/adjusted/H1_adj_res.RDS"))
H2_quartiles <- readRDS(here("results/adjusted/H2_adj_res.RDS"))
H3_quartiles <- readRDS(here("results/adjusted/H3_adj_res.RDS"))
H4_quartiles <- readRDS(here("results/adjusted/H4_adj_res.RDS"))
H12_spline <- readRDS(here("figure-data/emm_tr_adj_spline.data.RDS"))
H12_quartiles <- readRDS(here("results/adjusted/emm_tr_adj_res.RDS"))
d_for_plot <- function(x_name, y_name, x_var, y_var, spline, quart){
d <- NULL
for (i in 1: length(x_var)) {
for (j in 1:length(y_var)){
exists <- (quart%>%filter(X==x_var[i], Y==y_var[j]) %>% nrow()) != 0
if (exists){
print(quart%>%filter(X==x_var[i], Y==y_var[j]))
new <- data.frame(x=x_name[i], y=y_name[j], quart%>%filter(X==x_var[i], Y==y_var[j]))
d <- rbind(d, new)
}
}
}
d
}
d1 <- d_for_plot(c("ln Maternal Plasma Cortisol"),
c("Child LAZ 3-Month", "Child LAZ 14-Month", "Child LAZ 28-month"),
c("ln_preg_cort"),
c("laz_t1", "laz_t2", "laz_t3", "whz_t1", "whz_t2", "whz_t3"),
H1_spline, H1_quartiles)
#d1$x <- factor(d1$x,levels=c("Vitamin D", "Vitamin D deficiency", "Ln RBP", "Vitamin A deficiency","Ln ferritin", "Ln sTfR", "Iron deficiency"))
#d1$x <- factor(d1$x, levels=rev(levels(d1$x)))
d1$y <- factor(d1$y)
d1$`Time of outcome measurement` <- factor(ifelse(grepl("t3", d1$Y), "Age 28 months", "Age 14 months"))
p <- ggplot(d1, aes(x=x, y=point.diff)) +
geom_pointrange(aes(ymin=lb.diff , ymax=ub.diff, color=X, shape=`Time of outcome measurement`),
position = position_dodge2(width = 0.5),
size = 1, show.legend = T) +
facet_grid(rows=vars(y), scales = "free") +
labs(y = "Adjusted difference in mean child immune status outcome\nbetween 25th and 75th percentile of maternal exposure",
x="Maternal micronutrient exposure") +
geom_hline(yintercept = 0, linetype="dashed") +
scale_shape_manual(breaks=c("Age 14 months","Age 28 months"), values=c(21,16)) +
guides(color="none")+
scale_color_manual(values = tableau10[c(7:1)]) +
theme_ki() +
theme(plot.title = element_text(hjust = 0),
axis.title.x = element_text(size=11),
strip.text = element_text(hjust=0.5, size=10),
strip.placement = "outside",
axis.text.y = element_text(hjust = 1, size=9),
panel.spacing = unit(0.5, "lines"),
legend.position = "bottom")
p
d1 <- d_for_plot(c("ln Maternal Plasma Cortisol"),
c("Child LAZ 3-Month", "Child LAZ 14-Month", "Child LAZ 28-month", "Child WHZ 3-month", "Child WHZ 14-month", "Child WHZ 28-month"),
c("ln_preg_cort"),
c("laz_t1", "laz_t2", "laz_t3", "whz_t1", "whz_t2", "whz_t3"),
H1_spline, H1_quartiles)
#load spline data
H1_laz_spline <- readRDS(here("figure-data/H1_adj_spline.data.RDS"))
H1_whz_spline <- readRDS(here("figure-data/H1_adj_whz_spline.data.RDS"))
H1_igf_spline <- readRDS(here("figure_data/H1_igf_adj_spline.data.RDS"))
H1_igf_spline <- readRDS(here("figure-data/H1_igf_adj_spline.data.RDS"))
#load spline data
H1_laz_spline <- readRDS(here("figure-data/H1_adj_spline.data.RDS"))
H1_whz_spline <- readRDS(here("figure-data/H1_adj_whz_spline.data.RDS"))
H1_igf_spline <- readRDS(here("figure-data/H1_igf_adj_spline.data.RDS"))
H2_spline <- readRDS(here("figure-data/H2_adj_spline.data.RDS"))
H2_whz_spline <- readRDS(here("figure-data/H2_adj_whz_spline.data.RDS"))
H2_igf_spline <- readRDS(here("figure-data/H2_igf_adj_spline.data.RDS"))
H3_spline <- readRDS(here("figure-data/H3_adj_spline.data.RDS"))
H2_whz_spline <- readRDS(here("figure-data/H2_whz_adj_spline.data.RDS"))
H2_igf_spline <- readRDS(here("figure-data/H2_igf_adj_spline.data.RDS"))
H3_spline <- readRDS(here("figure-data/H3_adj_spline.data.RDS"))
H3_whz_spline <- readRDS(here("figure-data/H3_adj_whz_spline.data.RDS"))
H3_spline <- readRDS(here("figure-data/H3_adj_spline.data.RDS"))
H3_whz_spline <- readRDS(here("figure-data/H3_whz_adj_spline.data.RDS"))
H3_igf_spline <- readRDS(here("figure-data/H3_igf_adj_spline.data.RDS"))
H4_spline <- readRDS(here("figure-data/H4_adj_spline.data.RDS"))
H4_whz_spline <- readRDS(here("figure-data/H4_whz_adj_spline.data.RDS"))
H4_igf_spline <- readRDS(here("figure-data/H4_igf_adj_spline.data.RDS"))
#load results for quartiles
H1_quartiles <- readRDS(here("results/adjusted/H1_adj_res.RDS"))
H1_adj_res <- readRDS("C:/Users/Classof2020ChenBelin/pregnancy-stress-growth/results/adjusted/H1_adj_res.RDS")
View(H1_adj_res)
#load results for quartiles
H1_quartiles <- readRDS(here("results/adjusted/H1_adj_res.RDS"))
H1_whz_quart <- readRDS(here("results/adjusted/H1_whz_adj_res.RDS"))
H1_whz_quart <- readRDS(here("results/adjusted/H1_whz_adj_res.RDS"))
H1_igf_quart <- readRDS(here("results/adjusted/H1_igf_adj_res.RDS"))
H2_quartiles <- readRDS(here("results/adjusted/H2_adj_res.RDS"))
H2_whz_quart <- readRDS(here("results/adjusted/H2_whz_adj_res.RDS"))
H2_igf_quart <- readRDS(here("results/adjusted/H2_igf_adj_res.RDS"))
d_for_plot <- function(x_name, y_name, x_var, y_var, spline, quart){
d <- NULL
for (i in 1: length(x_var)) {
for (j in 1:length(y_var)){
exists <- (quart%>%filter(X==x_var[i], Y==y_var[j]) %>% nrow()) != 0
if (exists){
print(quart%>%filter(X==x_var[i], Y==y_var[j]))
new <- data.frame(x=x_name[i], y=y_name[j], quart%>%filter(X==x_var[i], Y==y_var[j]))
d <- rbind(d, new)
}
}
}
d
}
d1 <- d_for_plot(c("ln Maternal Plasma Cortisol"),
c("Child LAZ 3-Month", "Child LAZ 14-Month", "Child LAZ 28-month", "Child WHZ 3-month", "Child WHZ 14-month", "Child WHZ 28-month"),
c("ln_preg_cort"),
c("laz_t1", "laz_t2", "laz_t3", "whz_t1", "whz_t2", "whz_t3"),
c(H1_spline, H1_whz_spline, H1_igf_spline),
c(H1_quartiles, H1_whz_quart, H1_igf_quart))
H1_spline <- bind_rows(H1_laz_spline, H1_whz_spline, H1_igf_spline)
#load results for quartiles
H1_laz_quart <- readRDS(here("results/adjusted/H1_adj_res.RDS"))
H1_whz_quart <- readRDS(here("results/adjusted/H1_whz_adj_res.RDS"))
H1_igf_quart <- readRDS(here("results/adjusted/H1_igf_adj_res.RDS"))
H1_quart
H1_quart <- bind_rows(H1_laz_quart, H1_whz_quart, H1_igf_quart)
d_for_plot <- function(x_name, y_name, x_var, y_var, spline, quart){
d <- NULL
for (i in 1: length(x_var)) {
for (j in 1:length(y_var)){
exists <- (quart%>%filter(X==x_var[i], Y==y_var[j]) %>% nrow()) != 0
if (exists){
print(quart%>%filter(X==x_var[i], Y==y_var[j]))
new <- data.frame(x=x_name[i], y=y_name[j], quart%>%filter(X==x_var[i], Y==y_var[j]))
d <- rbind(d, new)
}
}
}
d
}
d1 <- d_for_plot(c("ln Maternal Plasma Cortisol"),
c("Child LAZ 3-Month", "Child LAZ 14-Month", "Child LAZ 28-month", "Child WHZ 3-month", "Child WHZ 14-month", "Child WHZ 28-month"),
c("ln_preg_cort"),
c("laz_t1", "laz_t2", "laz_t3", "whz_t1", "whz_t2", "whz_t3"),
H1_spline, H1_quartiles)
View(d1)
#load spline data
H1_laz_spline <- readRDS(here("figure-data/H1_adj_spline.data.RDS"))
H1_whz_spline <- readRDS(here("figure-data/H1_adj_whz_spline.data.RDS"))
H1_igf_spline <- readRDS(here("figure-data/H1_igf_adj_spline.data.RDS"))
H1_spline <- bind_rows(H1_laz_spline, H1_whz_spline, H1_igf_spline)
rm(list=ls())
# source(here::here("0_config.R"))
library(cowplot)
library(patchwork)
#load spline data
H1_laz_spline <- readRDS(here("figure-data/H1_adj_spline.data.RDS"))
H1_whz_spline <- readRDS(here("figure-data/H1_adj_whz_spline.data.RDS"))
H1_igf_spline <- readRDS(here("figure-data/H1_igf_adj_spline.data.RDS"))
H1_spline <- bind_rows(H1_laz_spline, H1_whz_spline, H1_igf_spline)
#load results for quartiles
H1_laz_quart <- readRDS(here("results/adjusted/H1_adj_res.RDS"))
H1_whz_quart <- readRDS(here("results/adjusted/H1_whz_adj_res.RDS"))
H1_igf_quart <- readRDS(here("results/adjusted/H1_igf_adj_res.RDS"))
H1_quart <- bind_rows(H1_laz_quart, H1_whz_quart, H1_igf_quart)
d <- NULL
rm(list=ls())
# source(here::here("0_config.R"))
library(cowplot)
source("C:/Users/Classof2020ChenBelin/pregnancy-stress-growth/0_config.R", echo=TRUE)
source("C:/Users/Classof2020ChenBelin/pregnancy-stress-growth/0_config.R", echo=TRUE)
rm(list=ls())
# source(here::here("0_config.R"))
library(cowplot)
library(patchwork)
#load spline data
H1_laz_spline <- readRDS(here("figure-data/H1_adj_spline.data.RDS"))
H1_whz_spline <- readRDS(here("figure-data/H1_adj_whz_spline.data.RDS"))
H1_igf_spline <- readRDS(here("figure-data/H1_igf_adj_spline.data.RDS"))
H1_spline <- bind_rows(H1_laz_spline, H1_whz_spline, H1_igf_spline)
#load results for quartiles
H1_laz_quart <- readRDS(here("results/adjusted/H1_adj_res.RDS"))
H1_whz_quart <- readRDS(here("results/adjusted/H1_whz_adj_res.RDS"))
H1_igf_quart <- readRDS(here("results/adjusted/H1_igf_adj_res.RDS"))
H1_quart <- bind_rows(H1_laz_quart, H1_whz_quart, H1_igf_quart)
d_for_plot <- function(x_name, y_name, x_var, y_var, spline, quart){
d <- NULL
for (i in 1: length(x_var)) {
for (j in 1:length(y_var)){
exists <- (quart%>%filter(X==x_var[i], Y==y_var[j]) %>% nrow()) != 0
if (exists){
print(quart%>%filter(X==x_var[i], Y==y_var[j]))
new <- data.frame(x=x_name[i], y=y_name[j], quart%>%filter(X==x_var[i], Y==y_var[j]))
d <- rbind(d, new)
}
}
}
d
}
d1 <- d_for_plot(c("ln Maternal Plasma Cortisol"),
c("Child LAZ 3-Month", "Child LAZ 14-Month", "Child LAZ 28-month", "Child WHZ 3-month", "Child WHZ 14-month", "Child WHZ 28-month"),
c("ln_preg_cort"),
c("laz_t1", "laz_t2", "laz_t3", "whz_t1", "whz_t2", "whz_t3"),
H1_spline, H1_quartiles)
#load results for quartiles
H1_laz_quart <- readRDS(here("results/adjusted/H1_adj_res.RDS"))
H1_whz_quart <- readRDS(here("results/adjusted/H1_whz_adj_res.RDS"))
H1_igf_quart <- readRDS(here("results/adjusted/H1_igf_adj_res.RDS"))
H1_quartiles <- bind_rows(H1_laz_quart, H1_whz_quart, H1_igf_quart)
d1 <- d_for_plot(c("ln Maternal Plasma Cortisol"),
c("Child LAZ 3-Month", "Child LAZ 14-Month", "Child LAZ 28-month", "Child WHZ 3-month", "Child WHZ 14-month", "Child WHZ 28-month"),
c("ln_preg_cort"),
c("laz_t1", "laz_t2", "laz_t3", "whz_t1", "whz_t2", "whz_t3"),
H1_spline, H1_quartiles)
d1 <- d_for_plot(c("ln Maternal Plasma Cortisol"),
c("Child LAZ 3-Month", "Child LAZ 14-Month", "Child LAZ 28-month",
"Child WHZ 3-month", "Child WHZ 14-month", "Child WHZ 28-month",
"Ln IGF-1 14-month", "Ln IGF-1 28-month"),
c("ln_preg_cort"),
c("laz_t1", "laz_t2", "laz_t3", "whz_t1", "whz_t2", "whz_t3", "igf_t2", "igf_t3"),
H1_spline, H1_quartiles)
#d1$x <- factor(d1$x,levels=c("Vitamin D", "Vitamin D deficiency", "Ln RBP", "Vitamin A deficiency","Ln ferritin", "Ln sTfR", "Iron deficiency"))
#d1$x <- factor(d1$x, levels=rev(levels(d1$x)))
d1$y <- factor(d1$y)
d1$`Time of outcome measurement` <- factor(ifelse(grepl("t3", d1$Y), "Age 28 months", "Age 14 months"))
p <- ggplot(d1, aes(x=x, y=point.diff)) +
geom_pointrange(aes(ymin=lb.diff , ymax=ub.diff, color=X, shape=`Time of outcome measurement`),
position = position_dodge2(width = 0.5),
size = 1, show.legend = T) +
facet_grid(rows=vars(y), scales = "free") +
labs(y = "Adjusted difference in mean child immune status outcome\nbetween 25th and 75th percentile of maternal exposure",
x="Maternal micronutrient exposure") +
geom_hline(yintercept = 0, linetype="dashed") +
scale_shape_manual(breaks=c("Age 14 months","Age 28 months"), values=c(21,16)) +
guides(color="none")+
scale_color_manual(values = tableau10[c(7:1)]) +
theme_ki() +
theme(plot.title = element_text(hjust = 0),
axis.title.x = element_text(size=11),
strip.text = element_text(hjust=0.5, size=10),
strip.placement = "outside",
axis.text.y = element_text(hjust = 1, size=9),
panel.spacing = unit(0.5, "lines"),
legend.position = "bottom")
p
p <- ggplot(d1, aes(x=x, y=point.diff)) +
geom_pointrange(aes(ymin=lb.diff , ymax=ub.diff, color=X, shape=`Time of outcome measurement`),
position = position_dodge2(width = 0.5),
size = 1, show.legend = T) +
facet_grid(rows=vars(y), scales = "free") +
labs(y = "Adjusted difference in mean child growth  outcome\nbetween 25th and 75th percentile of maternal exposure",
x="Maternal micronutrient exposure") +
geom_hline(yintercept = 0, linetype="dashed") +
scale_shape_manual(breaks=c("Age 14 months","Age 28 months"), values=c(21,16)) +
guides(color="none")+
scale_color_manual(values = tableau10[c(7:1)]) +
theme_ki() +
theme(plot.title = element_text(hjust = 0),
axis.title.x = element_text(size=11),
strip.text = element_text(hjust=0.5, size=10),
strip.placement = "outside",
axis.text.y = element_text(hjust = 1, size=9),
panel.spacing = unit(0.5, "lines"),
legend.position = "bottom")
install.packages("ggthemes")
library(ggthemes)
p <- ggplot(d1, aes(x=x, y=point.diff)) +
geom_pointrange(aes(ymin=lb.diff , ymax=ub.diff, color=X, shape=`Time of outcome measurement`),
position = position_dodge2(width = 0.5),
size = 1, show.legend = T) +
facet_grid(rows=vars(y), scales = "free") +
labs(y = "Adjusted difference in mean child growth  outcome\nbetween 25th and 75th percentile of maternal exposure",
x="Maternal micronutrient exposure") +
geom_hline(yintercept = 0, linetype="dashed") +
scale_shape_manual(breaks=c("Age 14 months","Age 28 months"), values=c(21,16)) +
guides(color="none")+
scale_color_manual(values = tableau10[c(7:1)]) +
theme_ki() +
theme(plot.title = element_text(hjust = 0),
axis.title.x = element_text(size=11),
strip.text = element_text(hjust=0.5, size=10),
strip.placement = "outside",
axis.text.y = element_text(hjust = 1, size=9),
panel.spacing = unit(0.5, "lines"),
legend.position = "bottom")
p <- ggplot(d1, aes(x=x, y=point.diff)) +
geom_pointrange(aes(ymin=lb.diff , ymax=ub.diff, color=X, shape=`Time of outcome measurement`),
position = position_dodge2(width = 0.5),
size = 1, show.legend = T) +
facet_grid(rows=vars(y), scales = "free") +
labs(y = "Adjusted difference in mean child growth  outcome\nbetween 25th and 75th percentile of maternal exposure",
x="Maternal micronutrient exposure") +
geom_hline(yintercept = 0, linetype="dashed") +
scale_shape_manual(breaks=c("Age 14 months","Age 28 months"), values=c(21,16)) +
guides(color="none")+
scale_color_manual(values = tableau_color_pal("Tableau 10")[c(7:1)]) +
theme_ki() +
theme(plot.title = element_text(hjust = 0),
axis.title.x = element_text(size=11),
strip.text = element_text(hjust=0.5, size=10),
strip.placement = "outside",
axis.text.y = element_text(hjust = 1, size=9),
panel.spacing = unit(0.5, "lines"),
legend.position = "bottom")
p <- ggplot(d1, aes(x=x, y=point.diff)) +
geom_pointrange(aes(ymin=lb.diff , ymax=ub.diff, color=X, shape=`Time of outcome measurement`),
position = position_dodge2(width = 0.5),
size = 1, show.legend = T) +
facet_grid(rows=vars(y), scales = "free") +
labs(y = "Adjusted difference in mean child growth  outcome\nbetween 25th and 75th percentile of maternal exposure",
x="Maternal micronutrient exposure") +
geom_hline(yintercept = 0, linetype="dashed") +
scale_shape_manual(breaks=c("Age 14 months","Age 28 months"), values=c(21,16)) +
guides(color="none")+
scale_color_manual(values = ggthemes::colorblind_pal()[c(7:1)]) +
theme_ki() +
theme(plot.title = element_text(hjust = 0),
axis.title.x = element_text(size=11),
strip.text = element_text(hjust=0.5, size=10),
strip.placement = "outside",
axis.text.y = element_text(hjust = 1, size=9),
panel.spacing = unit(0.5, "lines"),
legend.position = "bottom")
guides(color="none")+
d1 <- d_for_plot(c("ln Maternal Plasma Cortisol"),
c("Child LAZ 3-Month", "Child LAZ 14-Month", "Child LAZ 28-month",
"Child WHZ 3-month", "Child WHZ 14-month", "Child WHZ 28-month",
"Ln IGF-1 14-month", "Ln IGF-1 28-month"),
c("ln_preg_cort"),
c("laz_t1", "laz_t2", "laz_t3", "whz_t1", "whz_t2", "whz_t3", "igf_t2", "igf_t3"),
H1_spline, H1_quartiles)
#d1$x <- factor(d1$x,levels=c("Vitamin D", "Vitamin D deficiency", "Ln RBP", "Vitamin A deficiency","Ln ferritin", "Ln sTfR", "Iron deficiency"))
#d1$x <- factor(d1$x, levels=rev(levels(d1$x)))
d1$y <- factor(d1$y)
d1$`Time of outcome measurement` <- factor(ifelse(grepl("t3", d1$Y), "Age 28 months", "Age 14 months"))
p <- ggplot(d1, aes(x=x, y=point.diff)) +
position = position_dodge2(width = 0.5),
p <- ggplot(d1, aes(x=x, y=point.diff)) +
geom_pointrange(aes(ymin=lb.diff , ymax=ub.diff, color=X, shape=`Time of outcome measurement`),
position = position_dodge2(width = 0.5),
size = 1, show.legend = T) +
facet_grid(rows=vars(y), scales = "free") +
labs(y = "Adjusted difference in mean child growth  outcome\nbetween 25th and 75th percentile of maternal exposure",
x="Maternal micronutrient exposure") +
geom_hline(yintercept = 0, linetype="dashed") +
scale_shape_manual(breaks=c("Age 14 months","Age 28 months"), values=c(21,16)) +
guides(color="none")+
scale_color_manual(values = ggthemes::colorblind_pal() +
theme_ki() +
theme(plot.title = element_text(hjust = 0),
axis.title.x = element_text(size=11),
strip.text = element_text(hjust=0.5, size=10),
strip.placement = "outside",
axis.text.y = element_text(hjust = 1, size=9),
panel.spacing = unit(0.5, "lines"),
legend.position = "bottom"))
p <- ggplot(d1, aes(x=x, y=point.diff)) +
geom_pointrange(aes(ymin=lb.diff , ymax=ub.diff, color=X, shape=`Time of outcome measurement`),
position = position_dodge2(width = 0.5),
size = 1, show.legend = T) +
facet_grid(rows=vars(y), scales = "free") +
labs(y = "Adjusted difference in mean child growth  outcome\nbetween 25th and 75th percentile of maternal exposure",
x="Maternal micronutrient exposure") +
geom_hline(yintercept = 0, linetype="dashed") +
scale_shape_manual(breaks=c("Age 14 months","Age 28 months"), values=c(21,16)) +
guides(color="none")+
scale_color_manual(values = ggthemes::colorblind_pal() +
theme(plot.title = element_text(hjust = 0),
axis.title.x = element_text(size=11),
strip.text = element_text(hjust=0.5, size=10),
strip.placement = "outside",
axis.text.y = element_text(hjust = 1, size=9),
panel.spacing = unit(0.5, "lines"),
legend.position = "bottom"))
p
p %>% ggsave(filename="figures/pregnancy-stress_point_diff_micronutrients-hypo1.jpg", width=10, height=7)
p <- ggplot(d1, aes(x=x, y=point.diff)) +
geom_pointrange(aes(ymin=lb.diff , ymax=ub.diff, color=X, shape=`Time of outcome measurement`),
position = position_dodge2(width = 0.5),
size = 1, show.legend = T) +
facet_grid(rows=vars(y), scales = "free") +
labs(y = "Adjusted difference in mean child growth  outcome\nbetween 25th and 75th percentile of maternal exposure",
x="Maternal micronutrient exposure") +
geom_hline(yintercept = 0, linetype="dashed") +
scale_shape_manual(breaks=c("Age 14 months","Age 28 months"), values=c(21,16)) +
guides(color="none")+
scale_color_manual(values = ggthemes::colorblind_pal()) +
theme(plot.title = element_text(hjust = 0),
axis.title.x = element_text(size=11),
strip.text = element_text(hjust=0.5, size=10),
strip.placement = "outside",
axis.text.y = element_text(hjust = 1, size=9),
panel.spacing = unit(0.5, "lines"),
legend.position = "bottom")
p
p <- ggplot(d1, aes(x=x, y=point.diff)) +
geom_pointrange(aes(ymin=lb.diff , ymax=ub.diff, color=X, shape=`Time of outcome measurement`),
position = position_dodge2(width = 0.5),
size = 1, show.legend = T) +
facet_grid(rows=vars(y), scales = "free") +
labs(y = "Adjusted difference in mean child growth  outcome\nbetween 25th and 75th percentile of maternal exposure",
x="Maternal micronutrient exposure") +
geom_hline(yintercept = 0, linetype="dashed") +
scale_shape_manual(breaks=c("Age 14 months","Age 28 months"), values=c(21,16)) +
guides(color="none")+
scale_color_manual(values = ggthemes::colorblind_pal()) +
theme(plot.title = element_text(hjust = 0),
axis.title.x = element_text(size=11),
strip.text = element_text(hjust=0.5, size=10),
strip.placement = "outside",
axis.text.y = element_text(hjust = 1, size=9),
panel.spacing = unit(0.5, "lines"),
legend.position = "bottom")
p
n <- length(unique(d1$X))  # Calculate the number of unique colors needed
n
p <- ggplot(d1, aes(x=x, y=point.diff)) +
geom_pointrange(aes(ymin=lb.diff , ymax=ub.diff, color=X, shape=`Time of outcome measurement`),
position = position_dodge2(width = 0.5),
size = 1, show.legend = T) +
facet_grid(rows=vars(y), scales = "free") +
labs(y = "Adjusted difference in mean child growth  outcome\nbetween 25th and 75th percentile of maternal exposure",
x="Maternal micronutrient exposure") +
geom_hline(yintercept = 0, linetype="dashed") +
scale_shape_manual(breaks=c("Age 14 months","Age 28 months"), values=c(21,16)) +
guides(color="none")+
scale_color_manual(values = ggthemes::colorblind_pal()(1)) +
theme(plot.title = element_text(hjust = 0),
axis.title.x = element_text(size=11),
strip.text = element_text(hjust=0.5, size=10),
strip.placement = "outside",
axis.text.y = element_text(hjust = 1, size=9),
panel.spacing = unit(0.5, "lines"),
legend.position = "bottom")
p
p %>% ggsave(filename="figures/pregnancy-stress_point_diff_micronutrients-hypo1.jpg", width=10, height=7)
p <- ggplot(d1, aes(x=x, y=point.diff)) +
geom_pointrange(aes(ymin=lb.diff , ymax=ub.diff, color=X, shape=`Time of outcome measurement`),
position = position_dodge2(width = 0.5),
size = 1, show.legend = T) +
facet_grid(rows=vars(y), scales = "free") +
labs(y = "Adjusted difference in mean child growth  outcome\nbetween 25th and 75th percentile of maternal exposure",
x="Maternal micronutrient exposure") +
geom_hline(yintercept = 0, linetype="dashed") +
scale_shape_manual(breaks=c("Age 14 months","Age 28 months"), values=c(21,16)) +
guides(color="none")+
scale_color_manual(values = ggthemes::palette_pander(1)) +
theme(plot.title = element_text(hjust = 0),
axis.title.x = element_text(size=11),
strip.text = element_text(hjust=0.5, size=10),
strip.placement = "outside",
axis.text.y = element_text(hjust = 1, size=9),
panel.spacing = unit(0.5, "lines"),
legend.position = "bottom")
p
p %>% ggsave(filename="figures/pregnancy-stress_point_diff_micronutrients-hypo1.jpg", width=10, height=7)
p <- ggplot(d1, aes(x=x, y=point.diff)) +
geom_pointrange(aes(ymin=lb.diff , ymax=ub.diff, color=X, shape=`Time of outcome measurement`),
position = position_dodge2(width = 0.5),
size = 1, show.legend = T) +
facet_grid(rows=vars(y), scales = "free") +
labs(y = "Adjusted difference in mean child growth  outcome\nbetween 25th and 75th percentile of maternal exposure",
x="Maternal micronutrient exposure") +
geom_hline(yintercept = 0, linetype="dashed") +
scale_shape_manual(breaks=c("Age 3 months", "Age 14 months","Age 28 months"), values=c(21,16)) +
guides(color="none")+
scale_color_manual(values = ggthemes::palette_pander(1)) +
theme(plot.title = element_text(hjust = 0),
axis.title.x = element_text(size=11),
strip.text = element_text(hjust=0.5, size=10),
strip.placement = "outside",
axis.text.y = element_text(hjust = 1, size=9),
panel.spacing = unit(0.5, "lines"),
legend.position = "bottom")
p
p %>% ggsave(filename="figures/pregnancy-stress_point_diff_micronutrients-hypo1.jpg", width=10, height=7)
#d1$x <- factor(d1$x,levels=c("Vitamin D", "Vitamin D deficiency", "Ln RBP", "Vitamin A deficiency","Ln ferritin", "Ln sTfR", "Iron deficiency"))
#d1$x <- factor(d1$x, levels=rev(levels(d1$x)))
d1$y <- factor(d1$y)
d1$`Time of outcome measurement` <- factor(ifelse(grepl("t3", d1$Y), "Age 28 months", "Age 14 months", "Age 3 months"))
d1$`Time of outcome measurement` <- factor(ifelse(grepl("t3", d1$Y), "Age 28 months", "Age 14 months"))
p <- ggplot(d1, aes(x=x, y=point.diff)) +
geom_pointrange(aes(ymin=lb.diff , ymax=ub.diff, color=X, shape=`Time of outcome measurement`),
position = position_dodge2(width = 0.5),
size = 1, show.legend = T) +
facet_grid(rows=vars(y), scales = "free") +
labs(y = "Adjusted difference in mean child growth  outcome\nbetween 25th and 75th percentile of maternal exposure",
x="Maternal micronutrient exposure") +
geom_hline(yintercept = 0, linetype="dashed") +
scale_shape_manual(breaks=c("Age 3 months", "Age 14 months","Age 28 months"), values=c(21,16)) +
guides(color="none")+
scale_color_manual(values = ggthemes::palette_pander(1)) +
theme(plot.title = element_text(hjust = 0),
axis.title.x = element_text(size=11),
strip.text = element_text(hjust=0.5, size=10),
strip.placement = "outside",
axis.text.y = element_text(hjust = 1, size=9),
panel.spacing = unit(0.5, "lines"),
legend.position = "bottom")
p
p %>% ggsave(filename="figures/hypo1.jpg", width=10, height=7)
